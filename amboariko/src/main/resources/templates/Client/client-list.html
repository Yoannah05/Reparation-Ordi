<!-- Formulaire de filtre par date de retour -->
<div class="mb-3">
    <label for="dateRetour" class="form-label">Filtrer par date de retour</label>
    <input type="date" class="form-control" id="dateRetour" name="dateRetour">
    <button class="btn btn-primary mt-2" onclick="filterClientsByDate()">Filtrer</button>
</div>

<div class="card shadow mb-4">
  <a class="btn-primary" id="addClientBtn" href="/clients/new">
    <i class="fas fa-plus"></i> Nouveau Client
  </a>
  <div class="card-header py-3">
    <h6 class="m-0 font-weight-bold text-primary">Liste des clients</h6>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table
        class="table table-bordered"
        id="dataTable"
        width="100%"
        cellspacing="0"
      >
        <thead>
          <tr>
            <th>ID</th>
            <th>Nom</th>
            <th>Prénom</th>
            <th>Téléphone</th>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="client : ${clients}">
            <td th:text="${client.idClient}"></td>
            <td th:text="${client.nom}"></td>
            <td th:text="${client.prenom}"></td>
            <td th:text="${client.telephone}"></td>
            <td th:text="${client.email}"></td>
            <td>
              <div class="btn-group">
                <a
                  th:href="@{/clients/{id}/edit(id=${client.idClient})}"
                  class="btn btn-sm btn-outline-primary"
                >
                  <i class="fas fa-edit"></i>
                </a>
                <a
                  th:href="@{/clients/{id}/details(id=${client.idClient})}"
                  class="btn btn-sm btn-outline-info"
                >
                  <i class="fas fa-eye"></i>
                </a>
                <button
                  class="btn btn-sm btn-outline-danger"
                  onclick="confirmDelete(${client.idClient})"
                >
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
  function filterClientsByDate() {
    // Obtenir la date de retour sélectionnée
    const dateRetour = document.getElementById('dateRetour').value;
    
    // Rediriger vers l'URL avec le paramètre de date
    if (dateRetour) {
      window.location.href = '/clients?dateRetour=' + dateRetour;
    } else {
      // Si aucun filtre n'est sélectionné, recharger sans filtre
      window.location.href = '/clients';
    }
  }
</script>
